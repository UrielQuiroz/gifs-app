import{I as m,L as c,P as d,a as p,aa as s,b as f,ib as g,jb as h,p as a,sb as y}from"./chunk-DD3CTEQJ.js";var o={production:!0,companyName:"Gifs",companyName2:"App",companySlogan:"Maneja tus gifs",giphyApiKey:"M0eyIjzZ5CDWsX2IsWpQPKzGyvC1e3aH",giphyUrl:"https://api.giphy.com/v1"};var n=class{static mapGiphyItemToGif(i){return{id:i.id,title:i.title,url:i.images.original.url}}static mapGiphyItemsToGifArray(i){return i.map(this.mapGiphyItemToGif)}};var l="gifs",u=()=>{let t=localStorage.getItem(l)??"{}";return JSON.parse(t)},G=class t{http=d(y);trendingGifs=s([]);trendingGifsLoading=s(!1);trendingPage=s(0);trendingGifGroup=g(()=>{let i=[];for(let e=0;e<this.trendingGifs().length;e+=3)i.push(this.trendingGifs().slice(e,e+3));return i});searchHistory=s(u());searchHistoryKeys=g(()=>Object.keys(this.searchHistory()));constructor(){this.loadTrendingGifs()}saveGifsToLocalStorage=h(()=>{let i=JSON.stringify(this.searchHistory());localStorage.setItem(l,i)});loadTrendingGifs(){this.trendingGifsLoading()||(this.trendingGifsLoading.set(!0),this.http.get(`${o.giphyUrl}/gifs/trending`,{params:{api_key:o.giphyApiKey,limit:20,offset:this.trendingPage()*20}}).subscribe(i=>{let e=n.mapGiphyItemsToGifArray(i.data);this.trendingGifs.update(r=>[...r,...e]),this.trendingPage.update(r=>r+1),this.trendingGifsLoading.set(!1)}))}searchGifs(i){return this.http.get(`${o.giphyUrl}/gifs/search`,{params:{api_key:o.giphyApiKey,q:i,limit:20}}).pipe(a(({data:e})=>e),a(e=>n.mapGiphyItemsToGifArray(e)),m(e=>{this.searchHistory.update(r=>f(p({},r),{[i.toLowerCase()]:e}))}))}getHistoryGifs(i){return this.searchHistory()[i]??[]}static \u0275fac=function(e){return new(e||t)};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})};export{o as a,G as b};
